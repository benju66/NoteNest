<Window x:Class="NoteNest.UI.Windows.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:NoteNest.UI.Converters"
        Title="Settings" Height="500" Width="700"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        ResizeMode="NoResize">
    <Window.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibility"/>
        
        <Style x:Key="SettingHeader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
            <Setter Property="Foreground" Value="#333"/>
        </Style>
        
        <Style x:Key="SettingLabel" TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,4"/>
            <Setter Property="Foreground" Value="#666"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Main Content -->
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="180"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Category List -->
            <Border Grid.Column="0" Background="#F8F9FA" BorderBrush="#E1E4E8" BorderThickness="0,0,1,0">
                <ListBox x:Name="CategoryList" BorderThickness="0" Background="Transparent" SelectedIndex="0">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Padding" Value="16,8"/>
                            <Setter Property="Cursor" Value="Hand"/>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#E8F0FE"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#F0F2F5"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ListBox.ItemContainerStyle>
                    <ListBoxItem Content="General"/>
                    <ListBoxItem Content="Editor"/>
                    <ListBoxItem Content="Appearance"/>
                    <ListBoxItem Content="Files &amp; Folders"/>
                </ListBox>
            </Border>
            
            <!-- Settings Pages -->
            <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" Padding="24">
                <StackPanel>
                    <!-- General Settings -->
                    <StackPanel x:Name="GeneralSettings">
                        <TextBlock Text="General Settings" Style="{StaticResource SettingHeader}"/>
                        
                        <CheckBox Content="Enable auto-save" Margin="0,4"
                                  IsChecked="{Binding Settings.AutoSave}"/>
                        
                        <Grid Margin="24,8,0,0" IsEnabled="{Binding Settings.AutoSave}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="Auto-save interval:" Style="{StaticResource SettingLabel}"/>
                            <TextBox Grid.Column="1" Margin="8,0" VerticalAlignment="Center"
                                     Text="{Binding Settings.AutoSaveInterval}"/>
                            <TextBlock Grid.Column="2" Text="seconds" Style="{StaticResource SettingLabel}"/>
                        </Grid>
                        
                        <Separator Margin="0,16"/>
                        
                        <TextBlock Text="Startup" Style="{StaticResource SettingHeader}"/>
                        
                        <CheckBox Content="Show left panel on startup" Margin="0,4"
                                  IsChecked="{Binding ShowLeftPanelOnStartup}"/>
                        
                        <CheckBox Content="Show right panel on startup" Margin="0,4"
                                  IsChecked="{Binding ShowRightPanelOnStartup}"/>
                    </StackPanel>
                    
                    <!-- Editor Settings -->
                    <StackPanel x:Name="EditorSettings" Visibility="Collapsed">
                        <TextBlock Text="Editor Settings" Style="{StaticResource SettingHeader}"/>
                        
                        <CheckBox Content="Enable word wrap" Margin="0,4"
                                  IsChecked="{Binding Settings.WordWrap}"/>
                        
                        <CheckBox Content="Show line numbers" Margin="0,4"
                                  IsChecked="{Binding Settings.ShowLineNumbers}"/>
                        
                        <CheckBox Content="Show status bar" Margin="0,4"
                                  IsChecked="{Binding Settings.ShowStatusBar}"/>
                        
                        <Separator Margin="0,16"/>
                        
                        <TextBlock Text="Font" Style="{StaticResource SettingHeader}"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="200"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Font family:" Style="{StaticResource SettingLabel}"/>
                            <ComboBox Grid.Row="0" Grid.Column="1" Margin="8,4"
                                      Text="{Binding Settings.FontFamily}">
                                <ComboBoxItem>Consolas</ComboBoxItem>
                                <ComboBoxItem>Courier New</ComboBoxItem>
                                <ComboBoxItem>Segoe UI</ComboBoxItem>
                                <ComboBoxItem>Cascadia Code</ComboBoxItem>
                            </ComboBox>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Font size:" Style="{StaticResource SettingLabel}"/>
                            <ComboBox Grid.Row="1" Grid.Column="1" Margin="8,4"
                                      Text="{Binding Settings.FontSize}">
                                <ComboBoxItem>10</ComboBoxItem>
                                <ComboBoxItem>12</ComboBoxItem>
                                <ComboBoxItem>14</ComboBoxItem>
                                <ComboBoxItem>16</ComboBoxItem>
                            </ComboBox>
                        </Grid>
                    </StackPanel>
                    
                    <!-- Appearance Settings -->
                    <StackPanel x:Name="AppearanceSettings" Visibility="Collapsed">
                        <TextBlock Text="Appearance" Style="{StaticResource SettingHeader}"/>
                        
                        <TextBlock Text="Theme:" Style="{StaticResource SettingLabel}"/>
                        <ComboBox Width="200" HorizontalAlignment="Left" SelectedItem="{Binding Settings.Theme}">
                            <ComboBoxItem>Light</ComboBoxItem>
                            <ComboBoxItem>Dark</ComboBoxItem>
                            <ComboBoxItem>Auto</ComboBoxItem>
                        </ComboBox>
                    </StackPanel>
                    
                    <!-- Files & Folders Settings -->
                    <StackPanel x:Name="FilesSettings" Visibility="Collapsed">
                        <TextBlock Text="Files &amp; Folders" Style="{StaticResource SettingHeader}"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Default notes path:" 
                                       Style="{StaticResource SettingLabel}" Margin="0,0,8,0"/>
                            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding Settings.DefaultNotePath}" 
                                     IsReadOnly="True" Background="#F8F9FA"/>
                            <Button Grid.Row="0" Grid.Column="2" Content="Browse..." Margin="8,0,0,0" 
                                    Padding="12,4" Command="{Binding BrowseDefaultPathCommand}"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Metadata path:" 
                                       Style="{StaticResource SettingLabel}" Margin="0,8,8,0"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Settings.MetadataPath}" 
                                     IsReadOnly="True" Background="#F8F9FA" Margin="0,8,0,0"/>
                            <Button Grid.Row="1" Grid.Column="2" Content="Browse..." Margin="8,8,0,0" 
                                    Padding="12,4" Command="{Binding BrowseMetadataPathCommand}"/>
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </Grid>
        
        <!-- Bottom Buttons -->
        <Border Grid.Row="1" Background="#F8F9FA" BorderBrush="#E1E4E8" BorderThickness="0,1,0,0">
            <Grid Margin="24,12">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="OK" Width="80" Margin="0,0,8,0" IsDefault="True" Click="OK_Click"/>
                    <Button Content="Cancel" Width="80" IsCancel="True" Click="Cancel_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>

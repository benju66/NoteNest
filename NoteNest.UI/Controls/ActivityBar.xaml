<UserControl x:Class="NoteNest.UI.Controls.ActivityBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ui="http://schemas.modernwpf.com/2019"
             Width="48">
    <Border Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
            BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
            BorderThickness="0,0,1,0">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Top fixed buttons -->
            <StackPanel Grid.Row="0">
                <Button ToolTip="Explorer" Padding="0" BorderThickness="0" Background="Transparent" Height="48">
                    <TextBlock Text="ðŸ“" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Button>
                <Separator/>
            </StackPanel>

            <!-- Plugin buttons -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                <ItemsControl ItemsSource="{Binding Plugins}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button Padding="0" BorderThickness="0" Background="Transparent" Height="48" Command="{Binding DataContext.ActivatePluginCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}" CommandParameter="{Binding}" ToolTip="{Binding Name}">
                                <Button.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Open in Secondary" Command="{Binding DataContext.ActivatePluginSecondaryCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}" CommandParameter="{Binding}"/>
                                        <Separator/>
                                        <MenuItem Header="Pin to Primary" Command="{Binding DataContext.PinPluginPrimaryCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}" CommandParameter="{Binding}"/>
                                        <MenuItem Header="Pin to Secondary" Command="{Binding DataContext.PinPluginSecondaryCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}" CommandParameter="{Binding}"/>
                                    </ContextMenu>
                                </Button.ContextMenu>
                                <TextBlock Text="{Binding Icon}" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Button>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>

            <!-- Bottom settings button -->
            <StackPanel Grid.Row="2">
                <Separator/>
                <Button ToolTip="Settings" Padding="0" BorderThickness="0" Background="Transparent" Height="48">
                    <TextBlock Text="âš™ï¸" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>


